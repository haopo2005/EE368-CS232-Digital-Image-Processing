from Letters import *

class EnglishQwertyLetters(Letters):
    distances = {
        'q': {
            'q': 0.0, 'w': 0.3, 'e': 0.7, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 0.3, 's': 0.5, 'd': 1.0, 'f': 1.0, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 0.7, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'w': {
            'q': 0.3, 'w': 0.0, 'e': 0.3, 'r': 0.7, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 0.5, 's': 0.3, 'd': 0.5, 'f': 1.0, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 0.7, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'e': {
            'q': 0.7, 'w': 0.3, 'e': 0.0, 'r': 0.3, 't': 0.7, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 0.5, 'd': 0.3, 'f': 0.5, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 0.7, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'r': {
            'q': 1.0, 'w': 0.7, 'e': 0.3, 'r': 0.0, 't': 0.3, 'y': 0.7, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 0.5, 'f': 0.3, 'g': 0.5, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 0.7, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        't': {
            'q': 1.0, 'w': 1.0, 'e': 0.7, 'r': 0.3, 't': 0.0, 'y': 0.3, 'u': 0.7, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 0.5, 'g': 0.3, 'h': 0.5, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 0.7, 'n': 1.0, 'm': 1.0
        },
        'y': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 0.7, 't': 0.3, 'y': 0.0, 'u': 0.3, 'i': 0.7, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 0.5, 'h': 0.3, 'j': 0.5, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 0.7, 'm': 1.0
        },
        'u': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 0.7, 'y': 0.3, 'u': 0.0, 'i': 0.3, 'o': 0.7, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 1.0, 'h': 0.5, 'j': 0.3, 'k': 0.5, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 0.7
        },
        'i': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 0.7, 'u': 0.3, 'i': 0.0, 'o': 0.3, 'p': 0.7,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 1.0, 'h': 1.0, 'j': 0.5, 'k': 0.3, 'l': 0.5,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'o': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 0.7, 'i': 0.3, 'o': 0.0, 'p': 0.3,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 0.5, 'l': 0.3,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'p': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 0.7, 'o': 0.3, 'p': 0.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 0.5,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'a': {
            'q': 0.3, 'w': 0.5, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 0.0, 's': 0.3, 'd': 0.7, 'f': 1.0, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 0.3, 'x': 0.5, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        's': {
            'q': 0.5, 'w': 0.3, 'e': 0.5, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 0.3, 's': 0.0, 'd': 0.3, 'f': 0.7, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 0.5, 'x': 0.3, 'c': 0.5, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'd': {
            'q': 1.0, 'w': 0.5, 'e': 0.3, 'r': 0.5, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 0.7, 's': 0.3, 'd': 0.0, 'f': 0.3, 'g': 0.7, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 0.5, 'c': 0.3, 'v': 0.5, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'f': {
            'q': 1.0, 'w': 1.0, 'e': 0.5, 'r': 0.3, 't': 0.5, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 0.7, 'd': 0.3, 'f': 0.0, 'g': 0.3, 'h': 0.7, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 0.5, 'v': 0.3, 'b': 0.5, 'n': 1.0, 'm': 1.0
        },
        'g': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 0.5, 't': 0.3, 'y': 0.5, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 0.7, 'f': 0.3, 'g': 0.0, 'h': 0.3, 'j': 0.7, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 0.5, 'b': 0.3, 'n': 0.5, 'm': 1.0
        },
        'h': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 0.5, 'y': 0.3, 'u': 0.5, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 0.7, 'g': 0.3, 'h': 0.0, 'j': 0.3, 'k': 0.7, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 0.5, 'n': 0.3, 'm': 0.5
        },
        'j': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 0.5, 'u': 0.3, 'i': 0.5, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 0.7, 'h': 0.3, 'j': 0.0, 'k': 0.3, 'l': 0.7,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 0.5, 'm': 0.3
        },
        'k': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 0.5, 'i': 0.3, 'o': 0.5, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 1.0, 'h': 0.7, 'j': 0.3, 'k': 0.0, 'l': 0.3,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 0.5
        },
        'l': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 0.5, 'o': 0.3, 'p': 0.5,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 1.0, 'h': 1.0, 'j': 0.7, 'k': 0.3, 'l': 0.0,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'z': {
            'q': 0.7, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 0.3, 's': 0.5, 'd': 1.0, 'f': 1.0, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 0.0, 'x': 0.3, 'c': 0.7, 'v': 1.0, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'x': {
            'q': 1.0, 'w': 0.7, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 0.5, 's': 0.3, 'd': 0.5, 'f': 1.0, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 0.3, 'x': 0.0, 'c': 0.3, 'v': 0.7, 'b': 1.0, 'n': 1.0, 'm': 1.0
        },
        'c': {
            'q': 1.0, 'w': 1.0, 'e': 0.7, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 0.5, 'd': 0.3, 'f': 0.5, 'g': 1.0, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 0.7, 'x': 0.3, 'c': 0.0, 'v': 0.3, 'b': 0.7, 'n': 1.0, 'm': 1.0
        },
        'v': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 0.7, 't': 1.0, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 0.5, 'f': 0.3, 'g': 0.5, 'h': 1.0, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 0.7, 'c': 0.3, 'v': 0.0, 'b': 0.3, 'n': 0.7, 'm': 1.0
        },
        'b': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 0.7, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 0.5, 'g': 0.3, 'h': 0.5, 'j': 1.0, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 0.7, 'v': 0.3, 'b': 0.0, 'n': 0.3, 'm': 0.7
        },
        'n': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 0.7, 'y': 1.0, 'u': 1.0, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 0.5, 'h': 0.3, 'j': 0.5, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 0.7, 'b': 0.3, 'n': 0.0, 'm': 0.3
        },
        'm': {
            'q': 1.0, 'w': 1.0, 'e': 1.0, 'r': 1.0, 't': 1.0, 'y': 1.0, 'u': 0.7, 'i': 1.0, 'o': 1.0, 'p': 1.0,
            'a': 1.0, 's': 1.0, 'd': 1.0, 'f': 1.0, 'g': 1.0, 'h': 0.5, 'j': 0.3, 'k': 1.0, 'l': 1.0,
            'z': 1.0, 'x': 1.0, 'c': 1.0, 'v': 1.0, 'b': 0.7, 'n': 0.3, 'm': 0.0
        }
    }
    positions = {
        'q': 1, 'w': 2, 'e': 3, 'r': 4, 't': 5, 'y': 6, 'u': 7, 'i': 8, 'o': 9, 'p': 10,
        'a': 11, 's': 12, 'd': 13, 'f': 14, 'g': 15, 'h': 16, 'j': 17, 'k': 18, 'l': 19,
        'z': 20, 'x': 21, 'c': 22, 'v': 23, 'b': 24, 'n': 25, 'm': 26
    }

    def __init__(self):
        return

    def distance(self, a, b):
        if a not in self.distances or b not in self.distances:
            return 1.0
        return self.distances[a][b]

    def compare(self, a, b):
        if a not in self.positions or b not in self.positions:
            return False
        if a == b:
            return 0
        return -1 if (self.positions[a] < self.positions[b]) else 1

    def normalize(self, s):
        letters = []
        for letter in s[1:-1]:
            letters.append(letter)
        letters.sort(lambda x,y: self.compare(x, y))
        return ''.join(letters)

    def nearest(self, a, delta):
        if a not in self.distances:
            return [a]
        result = []
        for b in self.distances:
            if self.distance(a, b) <= delta:
                result.append(b)
        return result

    def word_distance(self, word_a, word_b):
        if len(word_a) != len(word_b):
            return 1
        word_len = len(word_a)
        if word_len == 0:
            return 0
        if word_len == 1:
            return self.distance(word_a[0], word_b[0])
        # min_distance = 1.0
        distance = 0.0
        for i in range(word_len):
            distance += self.distance(word_a[i], word_b[i])
        distance /= word_len
        # if distance < min_distance:
        #    min_distance = distance
        # return min_distance
        return distance
